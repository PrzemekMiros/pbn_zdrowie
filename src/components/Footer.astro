---
import logo from "../assets/images/global/logo.png";
import cookieModalUrl from "../scripts/cookie-modal.js?url";
import contactFormUrl from "../scripts/contact-form.js?url";
---

<footer class="bg-black relative text-gray-400 pb-9 pt-18 font-sans">
  <div class="pointer-events-none absolute inset-y-0 left-1/2 w-screen -translate-x-1/2 bg-black"></div>
  <div class="relative max-w-7xl mx-auto">
    
    <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center border-b border-gray-800 pb-12 mb-12 gap-8">
      <div class="flex items-center">
      <img src={logo.src} class="w-42" width="280" height="66" alt="Logo Przemek Miros">
      </div>

        <div class="flex flex-wrap sm:flex-row items-center gap-3">
          <span class="text-white font-bold">Google</span>
            <div class="flex text-orange-500 text-lg">★★★★★ </div>
            <p class="text-[14px]"><span class="text-white font-bold">5/5</span>&nbsp; średnia ocena na podstawie 15+ opinii&nbsp;&nbsp;</p>
        </div>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-10 mb-16">
      <div>
        <h3 class="text-white font-bold mb-6">Kontakt</h3>
        <div class="text-xs space-y-2 mb-6 leading-relaxed">
          <p>Przemek Miros</p>
          <p>kontakt@przemekmiros.pl</p>
          <p>+48 788 660 </p>
          <p>05-660 Warka</p>
        </div>
      </div>

      <div>
        <h3 class="text-white font-bold mb-6">Nawigacja</h3>
        <ul class="text-xs space-y-3">
          <li><a href="/realizacje/" class="hover:text-white transition-colors" title="Realizacje">Realizacje</a></li>
          <li><a href="/artykuly/" class="hover:text-white transition-colors" title="Artykuły">Artykuły</a></li>
          <li><a href="/o-mnie/" class="hover:text-white transition-colors" title="O mnie">O mnie</a></li>
          <li><a href="/miasta/" class="hover:text-white transition-colors" title="O mnie">Miasta</a></li>
        </ul>
      </div>

      <div>
        <h3 class="text-white font-bold mb-6">Social media</h3>
        <ul class="text-xs space-y-3">
          <li><a href="https://www.facebook.com/przemekstronyinternetowe" class="hover:text-white transition-colors" title="Facebook" target="_blank">Facebook</a></li>
          <li><a href="#https://www.behance.net/przemyslaw" class="hover:text-white transition-colors flex items-center gap-1" title="Behance" target="_blank">Behance <span class="text-[10px]">↗</span></a></li>
          <li><a href="https://github.com/PrzemekMiros" class="hover:text-white transition-colors flex items-center gap-1" title="Github">Github <span class="text-[10px]">↗</span></a></li>
          <li><a href="https://codepen.io/przemek-miros/" class="hover:text-white transition-colors" title="Codepen" target="_blank">Codepen <span class="text-[10px]">↗</span></a></li>
        </ul>
      </div>

      <div>
        <h3 class="text-white font-bold mb-6">Narzędzia</h3>
        <ul class="text-xs space-y-3">
          <li><a href="https://www.senuto.com/pl/" class="hover:text-white transition-colors" title="Senuto">Senuto <span class="text-[10px]">↗</span></a></li>
          <li><a href="https://ahrefs.com/" class="hover:text-white transition-colors" title="Ahrefs">Ahrefs <span class="text-[10px]">↗</span></a></li>
          <li><a href="https://gemini.google.com/" class="hover:text-white transition-colors" title="Gemini">Gemini <span class="text-[10px]">↗</span></a></li>
          <li><a href="https://www.figma.com/" class="hover:text-white transition-colors" title="Figma">Figma <span class="text-[10px]">↗</span></a></li>
        </ul>
      </div>
    </div>

    <div class="flex flex-col md:flex-row justify-between md:items-center border-t border-gray-800 pt-8 gap-6">
      <div class="flex flex-wrap justify-left gap-6 text-[11px]">
        <a href="#" class="hover:text-white transition-colors" title="Pliki cookies" data-cookie-open>Pliki cookies</a>
      </div>
    </div>
  </div>
</footer>

<div
  class="fixed inset-0 hidden bg-black/10 flex items-center justify-center z-[9999] p-4 font-sans text-left"
  data-cookie-modal
  aria-hidden="true"
  role="dialog"
  aria-modal="true"
  aria-labelledby="cookieconsent-title"
  tabindex="-1"
>
  <div class="bg-white rounded-lg shadow-2xl max-w-[600px] w-full overflow-hidden border border-gray-200">
    <div class="p-6 flex border-b border-gray-300">
      <div class="flex flex-col">
        <span id="cookieconsent-title" class="text-sm font-bold text-gray-900 leading-tight">Strona używa plików cookie</span>
      </div>
    </div>

    <div class="flex border-b border-gray-300" role="tablist" aria-label="Cookie consent">
      <button class="flex-1 py-3 text-[#00a3ff] font-bold text-[11px] uppercase tracking-wider border-b-2 border-[#00a3ff] cursor-pointer" type="button" data-cookie-tab="consent" role="tab" id="cookie-tab-consent" aria-controls="cookie-panel-consent" aria-selected="true">
        Zgoda
      </button>
      <button class="flex-1 py-3 text-gray-800 font-bold text-[11px] uppercase tracking-wider hover:bg-gray-50 transition-colors cursor-pointer" type="button" data-cookie-tab="details" role="tab" id="cookie-tab-details" aria-controls="cookie-panel-details" aria-selected="false">
        Szczegóły
      </button>
      <button class="flex-1 py-3 text-gray-800 font-bold text-[11px] uppercase tracking-wider hover:bg-gray-50 transition-colors cursor-pointer" type="button" data-cookie-tab="about" role="tab" id="cookie-tab-about" aria-controls="cookie-panel-about" aria-selected="false">
        Info
      </button>
    </div>

    <div class="p-6 md:p-8" data-cookie-panel="consent" role="tabpanel" id="cookie-panel-consent" aria-labelledby="cookie-tab-consent">
      <p class="text-gray-600 text-[12px] leading-[1.6]">
        Używamy plików cookie, aby personalizować treści i reklamy, udostępniać funkcje mediów społecznościowych i analizować nasz ruch. Udostępniamy również informacje o tym, jak korzystasz z naszej witryny, naszym partnerom społecznościowym, reklamowym i analitycznym.
      </p>
    </div>

    <div class="p-6 md:p-8 hidden" data-cookie-panel="details" role="tabpanel" id="cookie-panel-details" aria-labelledby="cookie-tab-details">
      <p class="text-gray-600 text-[12px] leading-[1.6] mb-4">
        Wybierz, na jakie kategorie plików cookie wyrażasz zgodę. Niezbędne są zawsze aktywne.
      </p>
      <div class="space-y-3 text-[12px] text-gray-700">
        <label class="flex items-center justify-between rounded border border-gray-200 px-3 py-2">
          <span>Niezbędne</span>
          <span class="flex items-center gap-2">
            <span class="text-[10px] uppercase tracking-wider text-gray-400">Zawsze aktywne</span>
            <input type="checkbox" checked disabled data-cookie-category="necessary" aria-label="Niezbędne" />
          </span>
        </label>
        <label class="flex items-center justify-between rounded border border-gray-200 px-3 py-2">
          <span>Funkcjonalne</span>
          <input type="checkbox" data-cookie-category="functional" aria-label="Funkcjonalne" />
        </label>
        <label class="flex items-center justify-between rounded border border-gray-200 px-3 py-2">
          <span>Analityczne</span>
          <input type="checkbox" data-cookie-category="analytics" aria-label="Analityczne" />
        </label>
        <label class="flex items-center justify-between rounded border border-gray-200 px-3 py-2">
          <span>Marketingowe</span>
          <input type="checkbox" data-cookie-category="marketing" aria-label="Marketingowe" />
        </label>
      </div>
      <div class="mt-5">
        <button class="cursor-pointer w-full bg-[#00a3ff] hover:bg-[#008bdb] text-white font-bold py-3 px-4 rounded transition-colors text-[11px] uppercase tracking-wide" type="button" data-cookie-save>
          Zapisz ustawienia
        </button>
      </div>
    </div>

    <div class="p-6 md:p-8 hidden" data-cookie-panel="about" role="tabpanel" id="cookie-panel-about" aria-labelledby="cookie-tab-about">
      <p class="text-gray-600 text-[12px] leading-[1.6]">
        Pliki cookie to niewielkie informacje zapisywane w Twojej przeglądarce. Pomagają działać stronie,
        zapamiętywać ustawienia oraz mierzyć ruch. Możesz zmienić zgodę w każdej chwili w ustawieniach.
      </p>
    </div>

    <div class="p-6 pt-0 flex flex-col md:flex-row gap-2">
      <button class="cursor-pointer flex-1 bg-[#00a3ff] hover:bg-[#008bdb] text-white font-bold py-3 px-4 rounded transition-colors text-[11px] uppercase tracking-wide" type="button" data-cookie-deny>
        Odmów
      </button>
      <button class="cursor-pointer flex-1 bg-[#00a3ff] hover:bg-[#008bdb] text-white font-bold py-3 px-4 rounded transition-colors text-[11px] uppercase tracking-wide flex items-center justify-center gap-1" type="button" data-cookie-customize>
        Dostosuj
        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7"></path>
        </svg>
      </button>
      <button class="cursor-pointer flex-1 bg-[#00a3ff] hover:bg-[#008bdb] text-white font-bold py-3 px-4 rounded transition-colors text-[11px] uppercase tracking-wide" type="button" data-cookie-accept>
        Zezwól
      </button>
    </div>
  </div>
</div>

<div class="circle-container hidden md:flex items-center justify-center relative">
		<svg class="circle-progress svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
			<path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
		</svg>
    <svg class="h-4 w-4 text-white absolute top-4 left-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="var(--accent)">
      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
    </svg>
</div>

<script>
document.addEventListener("astro:page-load", function(event) {
    let circleContainer = document.querySelector(".circle-container");
    if (!circleContainer) return;
        
		let offset = 50;
		let circlePath = document.querySelector('.circle-container path');
		let pathLength = circlePath.getTotalLength();
		circlePath.style.transition = circlePath.style.WebkitTransition = 'none';
		circlePath.style.strokeDasharray = pathLength;
		circlePath.style.strokeDashoffset = pathLength;
		circlePath.getBoundingClientRect();
		circlePath.style.transition = circlePath.style.WebkitTransition = 'stroke-dashoffset 10ms linear';

		let updateLoader = () => {

			let scrollTop = window.scrollY;
			let docHeight = document.body.offsetHeight;
			let winHeight = window.innerHeight;
			let height = docHeight - winHeight;
			let progress = pathLength - (scrollTop * pathLength / height);
			circlePath.style.strokeDashoffset = progress;

			if (scrollTop > offset) {
				circleContainer.classList.add("active");
			} else {
				circleContainer.classList.remove("active");
			}         
		}
	circleContainer.onclick = function(){
		window.scrollTo({ top: 0, behavior: 'smooth'});
	}
	window.onscroll = () => {
		updateLoader();
	}
	updateLoader();
});
</script>

<script src={cookieModalUrl} defer></script>
<script src={contactFormUrl} defer></script>
