---
import BaseLayout from "../../layouts/BaseLayout.astro";
import MiastaHero from "../../layouts/heroes/MiastaHero.astro";

const entries = import.meta.glob("../../content/miasta/*.md", { eager: true });
const items = Object.entries(entries)
  .map(([file, entry]) => {
    const slug = file.split("/").pop().replace(".md", "");
    return { slug, ...entry.frontmatter };
  })
  .sort((a, b) => a.title.localeCompare(b.title, "pl", { sensitivity: "base" }));
---

<BaseLayout
  title="Miasta"
  description="Zobacz, gdzie projektuję strony internetowe i sprawdź lokalne propozycje oraz kontekst rynkowy."
  showHero={false}
>
  <MiastaHero
    title="Miasta"
    lead="Tworzę strony dla firm z całej Polski. Wybierz swoje miasto i zobacz, jak mogę wesprzeć lokalny biznes."
  />

  <section class="py-20">
    <div class="grid gap-5 md:grid-cols-2 lg:grid-cols-3">
      {items.map((miasto) => (
        <article class="group relative rounded-xl border border-[var(--border)] bg-white p-6 transition duration-300 hover:border-[var(--accent)] hover:-translate-y-1">
          <p class="text-xs uppercase tracking-[0.1em] text-[var(--accent)]">{miasto.title}</p>
          <h3 class="mt-3 text-2xl font-semibold text-[var(--text)] leading-tight">Strony internetowe dla firm z {miasto.town}</h3>
          {miasto.description ? (
            <p class="mt-4 text-sm leading-relaxed text-[var(--muted)]">{miasto.description}</p>
          ) : null}
          <div class="mt-6 flex items-center justify-between">
            <span class="text-xs font-semibold uppercase tracking-[0.1em] text-[var(--muted)]">Dowiedz się więcej</span>
            <span class="text-[var(--accent)] opacity-0 transition group-hover:opacity-100">&rarr;</span>
          </div>
          <a
            class="absolute inset-0"
            href={`/miasta/${miasto.slug}/`}
            aria-label={`Przejdź do strony miasta ${miasto.title}`}
          ></a>
        </article>
      ))}
    </div>
  </section>
</BaseLayout>
